(function(t){function e(e){for(var n,s,c=e[0],d=e[1],a=e[2],u=0,p=[];u<c.length;u++)s=c[u],i[s]&&p.push(i[s][0]),i[s]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,a||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,c=1;c<o.length;c++){var d=o[c];0!==i[d]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},i={app:0},r=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var a=0;a<c.length;a++)e(c[a]);var l=d;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},2422:function(t,e,o){},"2a82":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d");var n=o("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("button",{on:{click:t.logout}},[t._v("Log out")]),n("div",{staticClass:"container"},[n("img",{staticClass:"logo",attrs:{src:o("cf05"),alt:"Logo"}}),n("h1",{staticClass:"title"},[t._v("Todo List")]),this.$store.state.isLoggedIn?t._e():n("Auth"),this.$store.state.isLoggedIn?n("TodoList"):t._e()],1)])},r=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"about"},[o("h2",{staticClass:"title"},[t._v("Please log in or register")]),t._l(t.errors,function(e,n){return o("p",{key:n},[t._v(t._s(e))])}),o("form",{attrs:{action:"#"}},[o("label",[o("p",[t._v("Username")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",name:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),o("label",[o("p",[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),o("button",{on:{click:t.login}},[t._v("Log in")]),o("button",{on:{click:t.register}},[t._v("Register")])])],2)},c=[],d={name:"Auth",data:function(){return{username:"",password:"",errors:[]}},methods:{login:function(t){t.preventDefault(),this.checkForm(),0==this.errors.length&&this.$store.dispatch("login",{username:this.username,password:this.password}),this.username="",this.password=""},register:function(t){t.preventDefault(),this.checkForm(),0==this.errors.length&&this.$store.dispatch("register",{username:this.username,password:this.password}),this.username="",this.password=""},checkForm:function(){if(this.errors=[],this.username.trim()&&this.password.trim())return!0;this.username.trim()||this.password.trim()?this.username.trim()?this.password.trim()||this.errors.push("Please enter your password"):this.errors.push("Please enter your username"):this.errors.push("Please enter your username and password")}}},a=d,l=(o("94c0"),o("2877")),u=Object(l["a"])(a,s,c,!1,null,"79c4a929",null);u.options.__file="Auth.vue";var p=u.exports,m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodoTitle,expression:"newTodoTitle"}],staticClass:"todo-input",attrs:{type:"text",placeholder:"What needs to be done"},domProps:{value:t.newTodoTitle},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addTodo(e):null},input:function(e){e.target.composing||(t.newTodoTitle=e.target.value)}}}),o("transition-group",{attrs:{name:"fade","enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},t._l(t.todosFiltered,function(e,n){return o("TodoItem",{key:e.id,attrs:{todo:e,index:n,checkAll:!t.anyRemaining}})}),1),o("div",{staticClass:"todo-manage"},[o("TodoCheckAll"),o("TodoRemoveCompleted"),o("TodoItemsLeft")],1),o("TodoFilter")],1)},h=[],f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-item"},[o("div",{staticClass:"todo-item-left"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.completed,expression:"completed"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.completed)?t._i(t.completed,null)>-1:t.completed},on:{change:[function(e){var o=t.completed,n=e.target,i=!!n.checked;if(Array.isArray(o)){var r=null,s=t._i(o,r);n.checked?s<0&&(t.completed=o.concat([r])):s>-1&&(t.completed=o.slice(0,s).concat(o.slice(s+1)))}else t.completed=i},t.doneEditTodo]}}),t.editing?o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"},{name:"focus",rawName:"v-focus"}],staticClass:"todo-item-edit",attrs:{type:"text"},domProps:{value:t.title},on:{blur:t.doneEditTodo,keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.doneEditTodo(e):null},function(e){return"button"in e||!t._k(e.keyCode,"escape",void 0,e.key,void 0)?t.cancelEditTodo(e):null}],input:function(e){e.target.composing||(t.title=e.target.value)}}}):o("div",{staticClass:"todo-item-title",class:{completed:t.completed},on:{dblclick:t.editTodo}},[t._v(t._s(t.title))])]),o("div",{staticClass:"todo-item-remove",on:{click:function(e){t.removeTodo(t.id)}}},[t._v("Ã—")])])},v=[],g=(o("c5f6"),{name:"TodoItem",props:{todo:{type:Object,required:!0},index:{type:Number,required:!0},checkAll:{type:Boolean,required:!0}},watch:{checkAll:function(){this.checkAll?this.completed=!0:this.completed=this.todo.completed}},directives:{focus:{inserted:function(t){t.focus()}}},data:function(){return{id:this.todo.id,title:this.todo.title,editing:this.todo.editing,completed:this.todo.completed,beforeEditCache:""}},methods:{removeTodo:function(t){this.$store.dispatch("removeTodo",t)},editTodo:function(){this.beforeEditCache=this.title,this.editing=!0},doneEditTodo:function(){0==this.title.trim().length&&(this.title=this.beforeEditCache),this.editing=!1,this.$store.dispatch("updateTodo",{id:this.id,title:this.title,editing:this.editing,completed:this.completed})},cancelEditTodo:function(){this.title=this.beforeEditCache,this.editing=!1}}}),T=g,_=Object(l["a"])(T,f,v,!1,null,null,null);_.options.__file="TodoItem.vue";var b=_.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-check-all"},[o("label",[o("input",{attrs:{type:"checkbox"},domProps:{checked:!t.anyRemaining},on:{change:t.checkAll}}),t._v(" Check all\n  ")])])},y=[],w={name:"TodoCheckAll",computed:{anyRemaining:function(){return this.$store.getters.anyRemaining}},methods:{checkAll:function(){this.$store.dispatch("checkAll",event.target.checked)}}},C=w,x=Object(l["a"])(C,k,y,!1,null,null,null);x.options.__file="TodoCheckAll.vue";var A=x.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.showRemoveCompletedButton?o("div",{staticClass:"todo-remove-completed",on:{click:t.removeCompletedTodos}},[t._v("Remove completed")]):t._e()},j=[],O={name:"TodoRemoveCompleted",computed:{showRemoveCompletedButton:function(){return this.$store.getters.showRemoveCompletedButton},getCompletedTodosIds:function(){return this.$store.getters.getCompletedTodosIds}},methods:{removeCompletedTodos:function(){this.$store.dispatch("removeCompletedTodos")}}},E=O,I=Object(l["a"])(E,$,j,!1,null,null,null);I.options.__file="TodoRemoveCompleted.vue";var L=I.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-items-left"},[t._v(t._s(t.remaining)+" items left")])},F=[],R={name:"TodoItemsLeft",computed:{remaining:function(){return this.$store.getters.remaining}}},S=R,N=Object(l["a"])(S,P,F,!1,null,null,null);N.options.__file="TodoItemsLeft.vue";var B=N.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-filter"},[o("button",{class:{active:"all"==t.filter},on:{click:function(e){t.changeFilter("all")}}},[t._v("All")]),o("button",{class:{active:"active"==t.filter},on:{click:function(e){t.changeFilter("active")}}},[t._v("Active")]),o("button",{class:{active:"completed"==t.filter},on:{click:function(e){t.changeFilter("completed")}}},[t._v("Completed")])])},D=[],U={name:"TodoFilter",computed:{filter:function(){return this.$store.state.filter}},methods:{changeFilter:function(t){this.$store.dispatch("changeFilter",t)}}},q=U,J=Object(l["a"])(q,M,D,!1,null,null,null);J.options.__file="TodoFilter.vue";var G=J.exports,H={name:"TodoList",components:{TodoItem:b,TodoCheckAll:A,TodoRemoveCompleted:L,TodoItemsLeft:B,TodoFilter:G},mounted:function(){this.$store.dispatch("loadTodos")},data:function(){return{newTodoTitle:"",newTodoId:0}},computed:{anyRemaining:function(){return this.$store.getters.anyRemaining},todosFiltered:function(){return this.$store.getters.todosFiltered}},methods:{addTodo:function(){0!=this.newTodoTitle.trim().length&&(this.$store.dispatch("addTodo",{title:this.newTodoTitle,completed:!1}),this.newTodoTitle="")}}},W=H,z=(o("5b8a"),Object(l["a"])(W,m,h,!1,null,null,null));z.options.__file="TodoList.vue";var K=z.exports,Q={name:"App",components:{Auth:p,TodoList:K},beforeMount:function(){this.$store.dispatch("checkLogin")},methods:{logout:function(){this.$store.dispatch("logout")}}},V=Q,X=(o("5c0b"),Object(l["a"])(V,i,r,!1,null,null,null));X.options.__file="App.vue";var Y=X.exports,Z=o("cebc"),tt=o("f499"),et=o.n(tt),ot=(o("20d6"),o("2f62"));n["a"].use(ot["a"]);var nt="https://cors-anywhere.herokuapp.com/",it="https://salty-oasis-70023.herokuapp.com/",rt=new ot["a"].Store({state:{isLoggedIn:!1,username:"",filter:"all",todos:[]},getters:{remaining:function(t){return t.todos.filter(function(t){return!t.completed}).length},anyRemaining:function(t,e){return 0!=e.remaining},todosFiltered:function(t){return"all"===t.filter?t.todos:"active"===t.filter?t.todos.filter(function(t){return!t.completed}):"completed"===t.filter?t.todos.filter(function(t){return t.completed}):t.todos},showRemoveCompletedButton:function(t){return t.todos.filter(function(t){return t.completed}).length>0},getCompletedTodosIds:function(t){return t.todos.map(function(t){if(t.completed)return t.id})}},mutations:{setIsLoggedIn:function(t,e){t.isLoggedIn=e},loadTodos:function(t,e){t.todos=e},addTodo:function(t,e){t.todos.push({id:e.id,title:e.title,completed:e.completed,editing:e.editing})},updateTodo:function(t,e){var o=t.todos.findIndex(function(t){return t.id==e.id});t.todos.splice(o,1,{id:e.id,title:e.title,editing:e.editing,completed:e.completed})},removeTodo:function(t,e){var o=t.todos.findIndex(function(t){return t.id==e});t.todos.splice(o,1)},removeCompletedTodos:function(t){t.todos=t.todos.filter(function(t){return!t.completed})},changeFilter:function(t,e){t.filter=e},checkAll:function(t,e){t.todos.map(function(t){return t.completed=e})},setUsername:function(t,e){t.username=e}},actions:{checkLogin:function(t){var e=document.cookie;console.log("Cookie: "+e),fetch(nt+it+"checkLogin",{method:"POST"}).then(function(t){return t.json()}).then(function(t){return console.log(t),t}).then(function(e){t.commit("setIsLoggedIn",e.auth)})},login:function(t,e){fetch(nt+it+"login",{method:"POST",body:et()(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return console.log(t)}).then(function(){return t.dispatch("checkLogin")})},logout:function(t,e){fetch(nt+it+"logout",{method:"POST"}).then(function(t){return console.log(t)}).then(function(){return t.dispatch("checkLogin")})},register:function(t,e){fetch(nt+it+"register",{method:"POST",body:et()(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(o){401==o.status?alert("User already exist"):t.dispatch("login",e)}).catch(function(t){return alert(t)})},loadTodos:function(t){fetch(nt+it+"todos/"+this.state.username,{method:"GET"}).then(function(t){return t.json()}).then(function(t){return console.log(t)}).then(function(t){return t.map(function(t){t.id=t._id,delete t._id}),t}).then(function(e){return t.commit("loadTodos",e)}).catch(function(t){return alert(t)})},addTodo:function(t,e){fetch(nt+it+"todos/"+this.state.username,{method:"POST",body:et()(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){return t.dispatch("loadTodos")}).catch(function(t){return alert(t)})},updateTodo:function(t,e){var o=Object(Z["a"])({},e),n=o.id;delete o.id,delete o.editing,fetch("".concat(nt+it,"/").concat(n),{method:"PATCH",body:et()(o),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){return t.dispatch("loadTodos")}).catch(function(t){return alert(t)})},removeTodo:function(t,e){fetch("".concat(nt+it,"/").concat(e),{method:"DELETE"}).then(function(){return t.dispatch("loadTodos")}).catch(function(t){return alert(t)})},removeCompletedTodos:function(t){var e=this.getters.getCompletedTodosIds;e.map(function(e){return t.dispatch("removeTodo",e)})},changeFilter:function(t,e){t.commit("changeFilter",e)},checkAll:function(t,e){this.state.todos.map(function(o){o.completed=e,t.dispatch("updateTodo",o)})}}});n["a"].config.productionTip=!1,new n["a"]({store:rt,render:function(t){return t(Y)}}).$mount("#app")},"5b8a":function(t,e,o){"use strict";var n=o("2422"),i=o.n(n);i.a},"5c0b":function(t,e,o){"use strict";var n=o("5e27"),i=o.n(n);i.a},"5e27":function(t,e,o){},"94c0":function(t,e,o){"use strict";var n=o("2a82"),i=o.n(n);i.a},cf05:function(t,e,o){t.exports=o.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.f99d97f7.js.map